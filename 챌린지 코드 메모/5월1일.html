[5월 1일]

++ #5.0 Intervals

이번 섹션에서 할 clock부분을 시작하기 전 새로 만든 폴더들을 보자..
파일 하나에 모든 코드 넣는걸 별로 안 좋아하기 때문에 만들었다.

그래서 서로 다른 기능들에 대해 하나씩 다른 파일로 분리시켰다.
greetings파일은 전체 app에서 greetings 부분만 다루게 될 것이다.
이런식으로 세분화해서 관리하는 방식이 좋다 (divide and conquer)
이렇게 하면 코드가 짧아지기도 하기 때문에 좋다.
그래서 지금 한거는 각각의 폴더를 만들었고, JS폴더 내부의 app.js의 파일명은 greetings.js로 변경했다. 그리고 clock.js를 생성했다.
그리고 html파일을 보면, greetings.js와 clock.js를 import하고 있다.

시계를 넣기 위해 h1을 새로 만들도록 하자. 

이제부터 하는건 우리가 이전에 했던 작업이랑 굉장히 비슷할 것이다.
h2를 받아와서 그 내부에 text를 입력하기만 하면 된다.

document.querySlector에 h2와 id를 함께 사용하는 방법도 있고 id만 사용하던가 getElementById(“clock”)을 사용하는 방법도 있다.

시계 동작 확인.
시계는 기본값으로 00시00분을 나타내도록 하자. 기본값 설정만 그렇게 하자는 거다.
JS이벤트가 시작하기 전에는 

시계는 이런식으로 시작하게 될거다.
이제 intervals와 timeout에 대해 먼저 얘기해보자. 설명을 듣고나면 왜 이 개념들이 멋지다고 하는지 알 수 있을 것이다.
intervals는 매번 일어나야 할 일을 말한다. 예를 들어 ‘매2초’라고 하면 이게 interval이다.
그러니까 매 2초마다 내가 무슨 일이 일어나게 하고 싶을때 그럴때 쓰는게 interval이다.

지금 하고싶은 건 이 함수를 매2초마다 실행하는 것이다. 다행히 JS는 이미 그 개념을 내장하고 있다.
서버를 확인한다던가 하는 상황때문에 필요하기 때문이다.
그 기능을 제공하는 tool이 setInterval()이다.
setInterval은 2개의 argument를 받는다.
첫번째 argument는 내가 실행하고자 하는 function이다.
두번째 argument는 function 간격을 몇 ms로 할지 쓰면 된다.

이러면 sayHello function을 5초에 한 번 실행시키는 것이다.
저장하고 새로고침하면 처음엔 console에서 아무것도 보지 못할거다. 근데 5초가 지나면 console에서 첫번째 hello를 볼 수 있다.

5초에 한번씩 실행중..
이걸 이해하고 사용하는것도 너무 쉽다. setInterval()만 실행하면된다.


++ #5.1 Timeouts and Dates

이번에 배울건 function을 딱 한번만 호출하는건데 일정 시간이 흐른뒤에 호출하는거다.
전에 setInterval을 했던거처럼 이번엔 setTimeout을 쓸거다.
둘이 비슷하게 생겼는데 동작은 완전히 다르다. 
먼저 호출하려고 하는 function을 넣어준다. 그리고 얼마나 기다릴지 ms단위로 넣어주면 된다.

우리가 이제 할것은 시간이랑 분을 보여주는 시계를 만들 것이다.
이번엔 JS가 가지고 있는 Date object라는 tool을 써보도록 하자.
New Date() 이건 오늘 날짜를 가져온다.


Date의 document를 확인해보면 여기 나와있는 거처럼 쓸 수 있는게 정말 많은데

get date하면 오늘 날짜 1일 출력하는걸 볼 수 있다.

이건 수요일이란 의미. 숫자로는 3인 요일이라는 뜻.


이런식으로.. 

우리가 해야할건

이 2개를 이용하는거다.
매 초마다 이 function을 호출해보도록 할거다.


이게 우리가 console.log할 시계다.

이제 우린 date가 가진 여러가지 function들도 알게됐고 Interval에 대해서도 안다.
￼
확인해보면 이런식으로 시계를 만들게된 걸 확인할 수 있다.
매 초마다 우리가 하고싶은 건 새로은 date object를 만들고 있는거다. 
New Date Object는 현재 날짜, 시간, 분, 초에 대한 정보를 가지고 있고
우린 그런 object를 매 초마다 새로 create하고 있는 것이다.
그래서 이 전부가 시계처럼 보이게 된거다.
근데 0초일때 00초가 아닌 0으로 표기되는데 시간과 분처럼 00으로 표시하고싶다.
00,01,08,09,10 이런식으로
물론 지금 당장 보기에 맞긴 하다. 0초인건 맞으니까.

그리고 또 다른 문제는 새로고침 했을때 시간을 바로 보여주지 않는다. 1초를 기다려야하기 때문에.
그래서 getClock()을 호출할 건데 웹사이트가 로드되자마자 실행하고 또 매초마다 다시 실행하도록 하자.
새로고침 해보면 한번 호출한 다음 그 뒤로도 계속 실행되는게 보인다.
￼
시계만드는걸 어려울거라고 생각했겠지만 사실 엄청 간단한 작업이다.
이제 콘솔에 뜨는 텍스트를 넣어주기만 하면 된다.
￼
이렇게 바꿔주자

시계 완성
￼

아직 문제가 있긴 하다. 아까 말한거처럼 여기있는 숫자들이 표시되는 방식이 마음에 안든다.
두 자리수가 아닐 시 한자리수로 초가 표시되는거 말이다.
다음 챕터에서 고쳐보자.
복습하자면 getClock()을 즉시 호출하고 매초마다 getClock을 다시 실행하고 있다.
그 뒤에 setInterval에 의해서 1초마다 계속 호출하고 실행되고 있는 것이다.
그니까 저 함수를 한번 실행한 뒤 function들이 실행되도록 코드를 짜준 것이다.

#5.2 PadStart

항상 말하지만 JS세계에서 문제에 부딪힐때마다 다른 개발자들도 이미 똑같은 문제를 겪어봤을거라고 100%확신해도 된다.
많은 개발자들이 같은 문제를 겪고 또 겪었다면 Javascript라는 언어 자체에 이미 그 작업을 수행하는 function이 있을 것이다.
지금부터 우리가 해볼건 string을 무자 두개로 채우는 것이다.

우리는 현재 어떤 상황에서도 초가 두자리로 나오길 원한다.
우리가 JS에 요구할건 string이 항상 최소한 2개의 문자를 가지고 있어야 한다는 것이다.
그니까 만약 JS가 “1” 이런 sring을 만난다면 “01”이런식으로 0을 앞에 추가했으면 하는 것이다.

이런 상황에선 padStart()라는 function을 사용할 수 있다. 이 function은 string에 쓸 수 있는 function이다.
예를 들어 길이가 1인 문자가 있다고 하자. 그럼 우리는 JS한테 부탁하는거다. padStart()를 써서 padding을 추가해달라고. String 앞에.
string의 앞쪽 시작 부분을 더 늘려야하고 그렇게 해서 이 문자열의 길이가 2는 되어야 한다고 말해주는거다.
￼
만약 길이가 2가 되지 않는다면 앞쪽에 “0”을 추가하게 될거다. padStart()를 썼으니까.
“12”같은 2자리에다가 같은 짓을 하면 보이듯이 아무일도 하지 않는다.
￼
왜냐면 string의 길이가 2이기 때문에 padStart()는 아무 작업도 하지 않는 것이다.
이제 우린 PadStart()에 대해 알게 됐다.
padEnd()도 있는데 이거도 같은거지만 뒤쪽에 문자를 추가하는거다.
1이면 10 이렇게.. 01이 아니고.
￼
이런식으로 응용도 가능하다.
매우 유용한 function.

￼
이렇게 작성해주자.
이제 이렇게 하고싶은건 이렇게 사용하는게 아니고 padStart를 활용하는 것이다.
앞쪽에 0을 추가하는게 다다.
그럼 innerText를 바꾸는 부분도 달라져야 한다. 코드를 수정했으니까.
알아야할게 하나 있다. date.getHours()엔 padStart()을 쓸 수 없다. 왜냐면 getHours()는 number이기 때문이다.
예전에 text를 number로 바꾸는 법에 대해 배운적 있다. 반대로 number에서 text로 변환할 수도 있고.

New Date().getHours()를 실행해보면 number가 나온다.
하지만 원하는게 string이라면 이렇게 쓰면 된다.
￼
이런식으로..  그냥 string()으로 감싸주기만 하면 된다.
￼
코드에 적용.
이렇게하면 clock안의 innerText를 쉽게 넣을 수 있다. 백틱`을 써서 말이다. 작은 따옴표 큰 따옴표 아니고 백틱이다!!
￼
이렇게 해주면 끝이다.
새로고침하고 잘 되나 봐보자 01이라고 나와야 한다.
￼
오타 조심.
￼
동작 성공!!

다시 말하지만 padStart()가 동작하는 원리는 string이 가져야 하는 길이를 2로 설정하고 그렇지 않다면 strig 앞쪽에 0을 추가하도록 하는 것이다.



